<!DOCTYPE html>
<html lang="en">
    <head>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    	
    	<title>WesCourse</title>

    	<!-- Google Fonts -->
      <link href="https://fonts.googleapis.com/css?family=Abel|Bree+Serif|Anton|Cormorant+Garamond|Indie+Flower|Merriweather|Ubuntu|Josefin+Sans|Yanone+Kaffeesatz" rel="stylesheet">

      <!-- Font Awesome -->
      <link rel="stylesheet" type="text/css" href="/font-awesome.0/css/font-awesome.min.css">

    	<!-- Bootstrap CSS -->
    	<link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.css">	

      <!-- Font Awesome Star CSS -->
      <link rel="stylesheet" href="/dist/themes/bars-square.css">

      <!-- iCheck CSS -->
      <link rel="stylesheet" href="/iCheck/skins/line/green.css">

      <!-- Custom CSS -->
      <link rel="stylesheet" type="text/css" href="/css/container.css">
      <link rel="stylesheet" type="text/css" href="/css/navbar.css">
      <link rel="stylesheet" type="text/css" href="/css/courseInfo.css">
      <link rel="stylesheet" type="text/css" href="/css/specificCourse2.css">
      <link rel="stylesheet" type="text/css" href="/css/pagination.css">

    </head>

    <body>

      <div class="container">

        <!-- NavBar -->
        <nav class="navbar navbar-default">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="http://www.wesleyan.edu/">
                <img class="Brand" src="http://www.tennisoncampus.com/Assets/Wesleyan+University+Mascot2.jpg" width="50" height="40" />
              </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item active">
                  <a class="nav-link" href="/catalog">Catalog</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="/search">Search</a>
                </li>
              </ul>
              <ul class="nav navbar-nav navbar-right">
                <% if (!userLoggedIn) { %>
                  <li class="nav-item">
                      <a class="nav-link" href="/login">Sign In</a>
                  </li>
                <% } else { %>
                  <li class="nav-item profile-button">
                      <a class="nav-link" href="/profile/likes">
                        <img class="user-image" src="<%= image %>" width="20" height="20"/>
                        <p><%= username %></p>
                      </a>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="/logout">Sign Out</a>
                  </li>
                <% } %>
                <% if (!userLoggedIn) { %>
                  <li class="nav-item">
                      <a class="nav-link" href="/createUser">Create Account</a>
                  </li>
                <% } %>
                <form class="navbar-form navbar-right" method="POST" action="/search/query/1/1">
                  <label class="sr-only" for="search-keyword"></label>
                  <div class="form-group">
                      <input type="text" class="form-control" spellcheck="false" autocomplete="off" name="searchParam" id="search-keyword" placeholder="Search any keywords...">
                      <button type="submit" class="btn">Search</button>
                  </div>
              </form>
              </ul>

            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>


      <div class="container">
      
        <!-- Header -->
        <div class="row header">
          <div class="infos class-time col-xs-12 col-md-6 text-right">
            <h3><span class="infos-header">Class Time:</span> <%= courseInfo[0].class_date.slice(0,courseInfo[0].class_date.length-1) %></h3>
          </div>
          <div class="infos rest col-xs-12 col-md-6">
            <span class="course-acronym"><h3><span class="infos-header"><%= courseInfo[0].course_acronym %></span></h3></span><h3 class="course-name"><%= courseInfo[0].course_name %></h3>
          </div>
          <div class="infos rest col-xs-12 col-md-12">
            <h3><span class="infos-header">Section: </span><%= courseInfo[0].section %></h3>
          </div>
          <div class="infos rest col-xs-12 col-md-12">
            <h3><span class="infos-header">Professors: </span><%= courseInfo[0].professors %></h3>
          </div>
        </div>
      </div>

      <div class="container body">

        <!-- Course Ratings Overall -->
        <div class="row overall-ratings-container">
          <% if (recommendNum) { %>
            <div class="row border-wrapper">
            <div class="col-sm-6 col-xs-12 col-md-push-1 overall-ratings">
              <div class="col-xs-12 overall-ratings-header text-center">
                <h3>Overall Rating</h3>
              </div>
              <div class="col-xs-12 overall-ratings-num text-center">
                <% var overallColor = "" %>
                <% if (1 <= courseOverall && courseOverall < 2) { %>
                  <% overallColor = "indicator-red" %>
                <% } else if (2 <= courseOverall && courseOverall < 3) { %>
                  <% overallColor = "indicator-yellow" %>
                <% } else if (3 <= courseOverall && courseOverall < 4) { %>
                  <% overallColor = "indicator-blue" %>
                <% } else if (4 <= courseOverall && courseOverall < 5) { %>
                  <% overallColor = "indicator-lightBlue" %>
                <% } else if (courseOverall === 5) { %>
                  <% overallColor = "indicator-green" %>
                <% } %>
                <p class="<%= overallColor %>"><%= courseOverall %></p>
              </div>
            </div>
            <div class="col-sm-6 col-xs-12 col-md-pull-1 overall-recommend">
              <div class="col-xs-12 overall-recommend-header text-center">
                <h3>Recommend?</h3>
              </div>
              <div class="col-xs-12 overall-recommend-yes-no">
                <div class="col-xs-12 col-sm-6 col-sm-push-1 col-lg-push-1 overall-recommend-icon-num text-center yes">
                  <i class="fa fa-thumbs-up fa-lg" aria-hidden="true"></i> <span class="colon">:</span> <span class="overall-recommend-num yes"><%= recommendNum.yes %></span>
                </div>
                <div class="col-xs-12 col-sm-6 col-sm-pull-1 col-lg-pull-1 overall-recommend-icon-num text-center no">
                  <i class="fa fa-thumbs-down fa-lg" aria-hidden="true"></i> <span class="colon">:</span> <span class="overall-recommend-num no"><%= recommendNum.no %></span>
                </div>
              </div>
            </div>
            </div>
          <% } %>
        </div>

        <!-- Overall Ratings Graph -->
        <div class="row graph">
          <div class="col-xs-12">
            <div id="chart-container"></div>  
          </div>
        </div>
        
        

        <!-- Keys for Categories -->
        <div class="row key-group">
          <div class="col-xs-12 col-md-3 text-center">
            <p class="keys" id="..."><span class="indicator-red">1</span> &le; <span class="indicator-red">score</span> &lt; <span class="indicator-yellow">2</span> : ...</p>
          </div>
          <div class="col-xs-12 col-md-3 text-center">
            <p class="keys" id="warning"><span class="indicator-yellow">2</span> &le; <span class="indicator-yellow">score</span> &lt; <span class="indicator-blue">3</span> : Warning!</p>
          </div>
          <div class="col-xs-12 col-md-3 text-center">
            <p class="keys" id="do-able"><span class="indicator-blue">3</span> &le; <span class="indicator-blue">score</span> &lt; <span class="indicator-lightBlue">4</span> : Do-able</p>
          </div>
          <div class="col-xs-12 col-md-3 text-center">
            <p class="keys" id="excellent"><span class="indicator-lightBlue">4</span> &le; <span class="indicator-lightBlue">score</span> &lt; <span class="indicator-green">5</span> : Excellent!</p>
          </div>
        </div>


        <!-- Sorted Categories Results -->
        <div class="row">
          <div class="col-md-4 col-xs-12 title-user-info ratings-header">
            <h2>Ratings</h2>
          </div>
          <div class="col-md-8 col-xs-12 dropdown-btn text-left">
            <!-- Single button -->
            <div class="btn-group text-left">
              <button type="button" class="category-btn btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <%= categoryDisplay %> <span class="caret"></span>
              </button>
              <ul class="dropdown-menu pull-left">
                <li><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/likes">Likes</a></li>
                <li><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/overall_rating">Overall Rating</a></li>
                <li><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/difficulty">Difficulty</a></li>
                <li><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/organization">Organization</a></li>
                <li><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/effort">Effort Required</a></li>
                <li><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/professors">Professor(s)</a></li>
                <li><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/created_at">Recent</a></li>
              </ul>
            </div>
            <a class="submit-btn btn btn-danger" href="/comment-submit/<%= fieldAc %>/<%= courseAc %>">Submit a New Rating</a>      
          </div>
        </div>

        <hr id="ratings-info" />

        <!-- Comments Section -->
        <% if (courseComments) { %>
          <% for (var i=0; i < courseComments.length; i++) { %>
            <div class="panel submitted-ratings">
              <div class="panel-heading">
                <div class="row">
                  <% if (courseComments[i].username !== 'Anonymous') { %>
                    <% if (courseComments[i].use_google_img) { %>
                      <div class="col-xs-12 col-md-2">
                        <h3 class="username"><img src="<%= courseComments[i].google_image %>" width="30" height="30"/>  <%= courseComments[i].username %></h3>
                      </div>
                    <% } else { %>
                      <div class="col-xs-12 col-md-2">
                        <h3 class="username"><img src="<%= courseComments[i].custom_image %>" width="30" height="30"/>  <%= courseComments[i].username %></h3>
                      </div>
                    <% } %>
                  <% } else { %>
                    <div class="col-xs-12 col-md-2">
                      <h3 class="username"><%= courseComments[i].username %></h3>
                    </div>
                  <% } %>
                  <div class="col-xs-12 col-md-7 like-group">
                    <h3 class="">
                      <% if (haveLiked.length) { %>
                        <% if (haveLiked[i].haveLiked) { %>
                          <a href="#" class="liked" id="<%= i %>" data-like-link="/like/<%= fieldAc %>/<%= courseAc %>/<%= courseComments[i].id %>">
                            <i class="fa fa-heart" aria-hidden="true"></i>
                          </a>
                        <% } else { %>
                          <a href="#" class="unliked" id="<%= i %>" data-like-link="/unlike/<%= fieldAc %>/<%= courseAc %>/<%= courseComments[i].id %>">
                            <i class="fa fa-heart" aria-hidden="true"></i>
                          </a>
                        <% } %>
                      <% } else { %>
                        <a href="#" class="unliked" id="<%= i %>" data-like-link="/unlike/<%= fieldAc %>/<%= courseAc %>/<%= courseComments[i].id %>">
                          <i class="fa fa-heart" aria-hidden="true"></i>
                        </a>
                      <% } %>
                      <h3>: <span><%= courseComments[i].likes %></span></h3>
                    </h3>
                  </div>
                  <% if (courseComments[i].canEditOrDelete) { %>
                    <% if (courseComments[i].canEditOrDelete === 1) { %>
                      <div class="col-xs-12 col-md-1 edit-delete">
                        <div class="row">
                          <div class="col-md-6 col-xs-1">
                            <a href="/catalog/rating/edit/<%= fieldAc %>/<%= courseAc %>/<%= category %>/<%= courseComments[i].id %>">
                              <i class="fa fa-lg fa-pencil" aria-hidden="true"></i>
                            </a>
                          </div>
                          <div class="col-md-6 col-xs-1">
                            <a class="" data-toggle="modal" data-target="#ratingDelete">
                              <i class="fa fa-lg fa-trash" aria-hidden="true"></i>
                            </a>
                          </div>
                        </div>
                      </div>

                      <!-- Delete Rating Modal -->
                      <div class="modal fade" id="ratingDelete" tabindex="-1" role="dialog" aria-labelledby="ratingDeleteLabel">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                              <h4 class="modal-title" id="ratingDeleteLabel">Delete Rating</h4>
                            </div>
                            <div class="modal-body rating-delete">
                              <div class="row">
                                <div class="col-xs-12">
                                  <form class="form" action="/catalog/rating/delete/<%= fieldAc %>/<%= courseAc %>/<%= category %>/<%= courseComments[i].id %>" method="GET">
                                    <p>Are you sure you want to delete this rating?</p>
                                    <div class="text-right">
                                      <button type="submit" class="btn btn-danger">Yes</button>
                                    <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
                                  </div>
                                </form>   
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="col-xs-12 col-md-2 created-at text-right">
                        <p><%= courseComments[i].created_at %></p>
                      </div>
                    <% } else { %>
                      <div class="col-xs-12 col-md-3 created-at text-right">
                        <p><%= courseComments[i].created_at %></p>
                      </div>
                    <% } %>
                  <% } else { %>
                    <div class="col-xs-12 col-md-3 created-at text-right">
                      <p><%= courseComments[i].created_at %></p>
                    </div>
                  <% } %>
                </div>
              </div>
              <div class="panel-body">
                <div class="col-lg-4 all-ratings">
                  <div class="row all-ratings-row">
                    <% var categoryList = [courseComments[i].difficulty,courseComments[i].organization,courseComments[i].effort,courseComments[i].professors,((courseComments[i].difficulty + courseComments[i].organization + courseComments[i].effort + courseComments[i].professors)/4).toFixed(2),courseComments[i].recommend] %>
                    <% var categoryClassList = ["difficulty","organization","effort","professors","overall-avg","recommend"] %>
                    <% var categoryDisplayList = ["Difficulty","Organization","Effort Required","Professor(s)","Overall Average","Recommend"] %>
                    <% var color = "" %>

                    <% for (var j=0; j < categoryList.length; j++) { %>
                      <% if (1 <= parseInt(categoryList[j]) && parseInt(categoryList[j]) < 2) { %>
                        <% color = "indicator-red" %>
                      <% } else if (2 <= parseInt(categoryList[j]) && parseInt(categoryList[j]) < 3) { %>
                        <% color = "indicator-yellow" %>
                      <% } else if (3 <= parseInt(categoryList[j]) && parseInt(categoryList[j]) < 4) { %>
                        <% color = "indicator-blue" %>
                      <% } else if (4 <= parseInt(categoryList[j]) && parseInt(categoryList[j]) < 5) { %>
                        <% color = "indicator-lightBlue" %>
                      <% } else if (parseInt(categoryList[j]) === 5) { %>
                        <% color = "indicator-green" %>
                      <% } %>

                      <% if (j === 5) { %>
                        <div class="col-lg-12 <%= categoryClassList[j] %>">
                          <h4 class="ratings-header">
                            <%= categoryDisplayList[j] %>: <span class="indiv-ratings-yes-no">
                              <% if (categoryList[j] === "Yes") { %>
                                <i class="fa fa-thumbs-up" style="color: rgb(92, 184, 92)" aria-hidden="true"></i>
                              <% } else { %>
                                <i class="fa fa-thumbs-down" style="color: rgb(217, 83, 79);" aria-hidden="true"></i>
                              <% } %>
                            </span>
                          </h4>
                        </div>
                      <% } else { %>
                        <div class="col-lg-12 <%= categoryClassList[j] %>">
                          <h4 class="ratings-header">
                            <%= categoryDisplayList[j] %>: <span class="indiv-ratings-num <%= color %>"><%= categoryList[j] %></span>
                          </h4>
                        </div>
                      <% } %>
                    <% } %>
                  </div>
                </div>
                <div class="col-lg-8 comments">
                  <div class="row comments-row">
                    <div class="col-lg-12 comments-content-cont">
                      <pre><%= courseComments[i].comment %></pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <% } %>
        <% } %>
        <div class="row text-center">
            <nav aria-label="Page navigation">
              <ul class="pagination pagination-lg">
              <% if (previousSectionExists) { %>
                <li id="page-first" class="hidden-xs">
                  <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= 1 %>/<%= 1 %>/<%= category %>" aria-label="First">
                    <span aria-hidden="true">&Larr;</span>
                  </a>
                </li>
                <li id="page-prev-section" class="">
                  <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= currentSectionNum - 1 %>/<%= currentPageNum - currentPageNum%5 - 4 %>/<%= category %>" aria-label="Previous-Section">
                    <span aria-hidden="true">&laquo;</span>
                  </a>
                </li>
                <li id="page-previous" class="">
                  <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= currentSectionNum %>/<%= currentPageNum - 1 %>/<%= category %>" aria-label="Previous">
                    <span aria-hidden="true">&lsaquo;</span>
                  </a>
                </li>
              <% } else { %>
                <% if (currentPageNum === 1) { %>
                  <li id="page-first" class="disabled hidden-xs left">
                    <span>
                      <span aria-hidden="true">&Larr;</span>
                    </span>
                  </li>
                  <li id="page-previous-section" class="disabled left">
                    <span>
                      <span aria-hidden="true">&laquo;</span>
                    </span>
                  </li>
                  <li id="page-previous" class="disabled left">
                    <span>
                      <span aria-hidden="true">&lsaquo;</span>
                    </span>
                  </li>
                <% } else { %>
                  <li id="page-first" class="hidden-xs">
                    <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= 1 %>/<%= 1 %>/<%= category %>" aria-label="First">
                      <span aria-hidden="true">&Larr;</span>
                    </a>
                  </li>
                  <li id="page-previous-section" class="disabled left">
                    <span>
                      <span aria-hidden="true">&laquo;</span>
                    </span>
                  </li>
                  <li id="page-previous" class="">
                    <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= currentSectionNum %>/<%= currentPageNum - 1 %>/<%= category %>" aria-label="Previous">
                      <span aria-hidden="true">&lsaquo;</span>
                    </a>
                  </li>
                <% } %>
              <% } %>
              <% for (var i=0; i < currentSectionPagesNumRange.length; i++) {%>
                <% if (currentSectionPagesNumRange[i] === currentPageNum) { %>
                  <li class="page-item active"><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= currentSectionNum %>/<%= currentSectionPagesNumRange[i] %>/<%= category %>"><%= currentSectionPagesNumRange[i] %></a></li>
                <% } else { %>
                  <li class="page-item"><a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= currentSectionNum %>/<%= currentSectionPagesNumRange[i] %>/<%= category %>"><%= currentSectionPagesNumRange[i] %></a></li>
                <% } %>
              <% } %>
              <% if (nextSectionExists) { %>
                <li id="page-next" class="">
                  <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= currentSectionNum %>/<%= currentPageNum + 1 %>/<%= category %>" aria-label="Next">
                    <span aria-hidden="true">&rsaquo;</span>
                  </a>
                </li>
                <li id="page-next-section" class="">
                  <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= currentSectionNum + 1 %>/<%= currentPageNum-currentPageNum%5 + 6 %>/<%= category %>" aria-label="Next-Section">
                    <span aria-hidden="true">&raquo;</span>
                  </a>
                </li>
                <li id="page-last" class="hidden-xs">
                  <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= totalNumSections %>/<%= totalNumPages %>/<%= category %>" aria-label="Last">
                    <span aria-hidden="true">&Rarr;</span>
                  </a>
                </li>
              <% } else { %>
                <% if (currentPageNum === totalNumPages) { %>
                  <li id="page-next" class="disabled right">
                    <span>
                      <span aria-hidden="true">&rsaquo;</span>
                    </span>
                  </li>
                  <li id="page-next-section" class="disabled right">
                    <span>
                      <span aria-hidden="true">&raquo;</span>
                    </span>
                  </li>
                  <li id="page-last" class="disabled hidden-xs right">
                    <span>
                      <span aria-hidden="true">&Rarr;</span>
                    </span>
                  </li>
                <% } else { %>
                  <li id="page-next" class="">
                    <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= currentSectionNum %>/<%= currentPageNum + 1 %>/<%= category %>" aria-label="Next">
                      <span aria-hidden="true">&rsaquo;</span>
                    </a>
                  </li>
                  <li id="page-next-section" class="disabled right">
                    <span>
                      <span aria-hidden="true">&raquo;</span>
                    </span>
                  </li>
                  <li id="page-last" class="hidden-xs">
                    <a href="/catalog/<%= fieldAc %>/<%= courseAc %>/<%= totalNumSections %>/<%= totalNumPages %>/<%= category %>" aria-label="Last">
                      <span aria-hidden="true">&Rarr;</span>
                    </a>
                  </li>
                <% } %>
              <% } %>
              </ul>
            </nav>
        </div>
      </div>


      <!-- JQuery -->
      <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    

    	<!-- Bootstrap JavaScript -->
    	<script src="/bootstrap/js/bootstrap.js"></script>

      <!-- JQuery UI -->
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>

      <!-- HighCharts -->
      <script src="https://code.highcharts.com/highcharts.src.js"></script>

      <!-- JQuery Bar Rating -->
      <script src="/dist/jquery.barrating.min.js"></script>

      <!-- iCheck JavaScript -->
      <script src="/iCheck/icheck.min.js"></script>

      <!-- Custom JavaScript -->
      <script src="/js/navbar.js"></script>
      <script src="/js/courseInfo.js"></script>
      <script src="/js/ratingsNumColor.js"></script>
      <script src="/js/barRatingConfig.js"></script>
      <script src="/js/customRadio.js"></script>
      <script src="/js/paginationConfig.js"></script>
      <script src="/js/likesRatings.js"></script>
      
      <script>

        
        $(document).ready(function() {

          // HighCharts Configuration
          <% if (courseRating.length === 0) { %>
              $('div.body').html(`
                <div class="text-center">
                  <p style="margin-top: 150px;color:rgb(119,119,119);">NO DATA. PLEASE EVALUATE THIS COURSE IF YOU HAVE TAKEN IT.</p>
                  <a class="submit-btn btn btn-danger" href="/comment-submit/<%= fieldAc %>/<%= courseAc %>">Submit a New Rating</a>
                </div>`);
          <% } else { %>
              <% var tmp = []; %>
              <% for (var i=0;i < Object.keys(courseRating).length-3; ++i) { %>
                  <% tmp.push(courseRating[Object.keys(courseRating)[i]]) %>
              <% } %>
              <% var tmpColor = [] %>
              <% for (var i=0; i < tmp.length; i++) { %>
                <% if (0 <= tmp[i] && tmp[i] < 2) { %>
                  <% tmpColor.push('#d9534f') %>
                <% } else if (2 <= tmp[i] && tmp[i] < 3) { %>
                  <% tmpColor.push('#f0ad4e') %>
                <% } else if (3 <= tmp[i] && tmp[i] < 4) { %>
                  <% tmpColor.push('#0275d8') %>
                <% } else if (4 <= tmp[i] && tmp[i] < 5) { %>
                  <% tmpColor.push('#5bc0de') %>
                <% } else if (tmp[i] === 5) { %>
                  <% tmpColor.push('#5cb85c') %>
                <% } %>
              <% } %>

              // HighCharts Constructor
              var chart = Highcharts.chart('chart-container',{
                  credits: {
                      enabled: false
                  },
                  chart: {
                      type: 'column',
                      backgroundColor: {
                         linearGradient: { x1: 0, y1: 0, x2: 1, y2: 1 },
                         stops: [
                            [0, '#e5e5e5'],
                            [1, '#f9f9f9']
                         ]
                      },
                      style: {
                         fontFamily: '\'Unica One\', sans-serif'
                      },
                      plotBorderColor: '#606063'
                  },
                  colors: <%- JSON.stringify(tmpColor) %>,
                  title: {
                      text: 'Course Ratings',
                      style: {
                         color: '#777777',
                         textTransform: 'uppercase',
                         fontSize: '30px'
                      }
                  },
                  xAxis: {
                      categories: ["Difficulty","Organization","Effort Required","Professor(s)"],
                      fontSize: '20px',
                      gridLineColor: '#777777',
                      labels: {
                         style: {
                            color: '#777777',
                            fontSize: '18px'
                         }
                      },
                      lineColor: '#777777',
                      minorGridLineColor: '#777777',
                      tickColor: '#777777',
                      title: {
                         style: {
                            color: '#777777'

                         }
                      }
                  },
                  yAxis: {
                      title: {
                          text: 'Avg Ratings',
                          style: {
                              color: '#777777',
                              fontSize: '18px'
                          }
                      },
                      gridLineColor: '#777777',
                      labels: {
                         style: {
                            color: '#777777'

                         }
                      },
                      lineColor: '#777777',
                      minorGridLineColor: '#777777',
                      tickColor: '#777777',
                      tickWidth: 1,
                      max: 5
                  },
                  tooltip: {
                     useHTML: true,
                     backgroundColor: 'rgba(255, 255, 255, 1)',
                     style: {
                        color: '#777777'
                     },
                     formatter: function() {
                       return `<p style="width: 200px !important;font-size: 20px;text-align:center;">${this.x}: <span style="color: ${this.point.color}">${this.y}</span></p>`;
                     }
                  },
                  plotOptions: {
                     column: {
                        colorByPoint: true
                     },
                     series: {
                        dataLabels: {
                           color: '#777777'
                        },
                        marker: {
                           lineColor: '#777777'
                        }
                     },
                     boxplot: {
                        fillColor: '#990000'
                     },
                     candlestick: {
                        lineColor: 'white'
                     },
                     errorbar: {
                        color: 'white'
                     }
                  },
                  series: [{
                      showInLegend: false,
                      data: <%- JSON.stringify(tmp) %>
                  }]
              })
          <% } %>
        })
      </script>
    </body>

    
</html>