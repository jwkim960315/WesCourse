<!DOCTYPE html>
<html>
    <head>
    	<meta charset="utf-8">
    	<meta name="'viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    	
    	<title>WesCourse</title>

    	<link rel="stylesheet" type="text/css" href="views/css/home.css">

    	<!-- Bootstrap CSS -->
    	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">

    	<!-- Font Awesome -->
    	<script src="https://use.fontawesome.com/b6a42b064c.js"></script>

    	<!-- Google Fonts -->
    	<link href="https://fonts.googleapis.com/css?family=Bree+Serif|Anton|Cormorant+Garamond|Indie+Flower|Merriweather|Ubuntu|Josefin+Sans" rel="stylesheet">

    	<!-- Semantic UI CSS -->
    	<link rel="stylesheet" type="text/css" href="/semantic/dist/semantic.min.css">




    </head>

    <body>

    	<!-- NavBar -->
    	<nav class="navbar navbar-toggleable-md navbar-light navbar-inverse bg-inverse fixed-top">
		  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarContents" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
		    <span class="navbar-toggler-icon"></span>
		  </button>
          <div>
		  <a class="navbar-brand" href="http://www.wesleyan.edu/">
		  		<p id="wes">Wesleyan</p>
		  		<p id="uni">University</p>
		  </a>
          </div>

		  <div class="collapse navbar-collapse" id="navbarContents">
		    <ul class="navbar-nav mr-auto">
		      <li class="nav-item">
		        <a class="nav-link" href="/">Home<span class="sr-only">(current)</span></a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" href="/catalog">Catalog</a>
		      </li>
		      <li class="nav-item">
		        <a class="nav-link" href="/about">About</a>
		      </li>
		    </ul>
            <ul class="navbar-nav justify-content-end">
                <li class="nav-item">
                    <a class="nav-link" href="/login">Login</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/logout">LogOut</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/createUser">Create An Account</a>
                </li>
            </ul>

            
		  </div>
		</nav>










    	<!-- Header -->
    	<div class="jumbotron jumbotron-fluid">
		  <h3 class="display-3">WesCourse</h3>
          <div class="container">
            <img class="mx-auto d-block" src="https://upload.wikimedia.org/wikipedia/en/thumb/3/31/Wesleyan_University_Shield.svg/917px-Wesleyan_University_Shield.svg.png"/>
          </div>
		</div>


		<!-- Search Bar -->
        <div class="main-searchbar">
            <form class="form-inline" method="POST" action="/search/query/1/1">
                <!-- <div class="inline-group"> -->
                  <label class="sr-only" for="search-keyword"></label>
                  <!-- <div class="inline-group"> -->
                    <!-- <div class="input-field"> -->
                    <input type="text" class="form-control search-keyword" spellcheck="false" autocomplete="off" name="searchParam" id="search-keyword" placeholder="Search any keywords...">
                    <!-- <div class="col-1"> -->
                <!-- </div> -->
                <!-- <div class="submit-field"> -->
                    <button type="submit" class="btn btn-danger">Search</button>    
                    <!-- </div> -->
                  <!-- </div> -->
                  <!-- </div> -->
            </form>
            
        </div>

        <div class="courses-group">
            <div class="list-group inside-courses-group"></div>
        </div>

        <!-- <div class="outer-container"> -->
             
        <!-- </div> -->
        
        

        
        





        <!-- JQuery -->
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

		<!-- Semantics UI JavaScript -->
		<script src="/semantic/dist/semantic.min.js"></script>	    

    	<!-- Bootstrap 4 JavaScript -->
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

        <!-- Typeahead JavaScript -->
        <script src="./public/typeahead.min.js" type="text/javascript"></script>

        <!-- Event Handlers -->
        <script>

            // Search Bar Suggested Search Results Handler
            $('.search-keyword').on('input', function() {
                let keyword = $('.search-keyword').val();
                $.ajax({
                    url: `/searching`,
                    data: {keyword},
                    success: function(data) {

                        if (!data) {
                            return $('div.list-group').html("");
                        };

                        if (data === "-1") {
                            return $('div.list-group').html(`<div class="categories list-group-item">
                                                                <p>No Matching Results Found</p>
                                                             </div>`);
                        };

                        template = "";

                        for (var i=0; i < Object.keys(data).length; i++) {
                            template += `<div class="categories list-group-item">
                                            <p>${Object.keys(data)[i]}</p>
                                        </div>`;
                            data[Object.keys(data)[i]].forEach((obj,index,arr) => {

                                obj.professors = obj.professors.replace(/;/g,"<br/>");

                                splittedLst = obj.term_name.split(";");
                                

                                if (splittedLst.length !== 1 && splittedLst[0] !== splittedLst[1]) {
                                    obj.term_name = `${splittedLst[0]} & ${splittedLst[1]}`; 
                                } else {
                                    obj.term_name = splittedLst[0];
                                };


                                template += `<a class="list-group-item action courses" href="/catalog/${obj.field_acronym}/${obj.course_acronym}">
                                                <div class="col-6">
                                                    <div class="course-acronyms">
                                                        <p>Course: ${obj.course_acronym}</p>
                                                    </div>

                                                    <div class="course-names">
                                                        <p>${obj.course_name}</p>
                                                    </div>

                                                    <div class="sections">
                                                        <p>Section: ${obj.section}</p>
                                                    </div>

                                                    <div class="term-names">
                                                        <p>Term: ${obj.term_name}</p>
                                                    </div>
                                                </div>

                                                <div class="col-6 professors">
                                                    
                                                        <p>Professor(s): </p>
                                                        <p>${obj.professors}</p>
                                                    
                                                </div>
                                                
                                                

                                            </a>`;
                            });
                        };

                        $('div.list-group').html(template);
                        width = $('input#search-keyword').outerWidth();
                        $('.courses-group').outerWidth(width);
                    }
                })
            });


            // Search Results Show & Hide Transition Handlers
            $('')

            // Width Align Handler
            $(document).ready(function() {
                
                
                width = $('input#search-keyword').outerWidth();

                main_searchbar_width = $('.main-searchbar').outerWidth();
                form_width = $('button[type="submit"]').outerWidth()+width;
                console.log(main_searchbar_width);
                console.log(form_width);

                push_width = main_searchbar_width/2 - form_width/2;


                $('.courses-group').css('margin-left',push_width+'px');
                $('.form-inline').css('margin-left',push_width+'px');
                // $('.inside-courses-group').css('margin-left',push_width+'px');

                console.log($('.courses-group').css('margin-left'));
                console.log($('.form-inline').css('margin-left'));
                // console.log()
                
                // console.log(width);
                $('.courses-group').outerWidth(width);
                // console.log()
                



            });


            $(window).resize(function() {
                    width = $('input#search-keyword').outerWidth();
                    // console.log(width);

                    main_searchbar_width = $('.main-searchbar').outerWidth();
                    form_width = $('button[type="submit"]').outerWidth()+width;
                    console.log(main_searchbar_width);
                    console.log(form_width);

                    push_width = main_searchbar_width/2 - form_width/2;


                    $('.courses-group').css('margin-left',push_width+'px');
                    $('.form-inline').css('margin-left',push_width+'px');
                    // $('.inside-courses-group').css('margin-left',push_width+'px');

                    console.log($('.courses-group').css('margin-left'));
                    console.log($('.form-inline').css('margin-left'));
                    $('.courses-group').outerWidth(width);
                });
            




        </script>
    </body>

    
</html>